<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>CRONIX</title>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow-x: hidden;
    }
    
    @keyframes gradientScroll {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }
    
    body {
        min-height: 100vh;
        background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
        background-size: 400% 400%;
        animation: gradientScroll 12s ease infinite;

        /*background: radial-gradient(circle at 20% 20%, #ff9a9e, transparent 60%),
                    radial-gradient(circle at 80% 80%, #a1c4fd, transparent 60%),
                    linear-gradient(135deg, #fbc2eb, #a6c1ee);
        background-attachment: fixed;*/   
    }
    
    section {
      width: 100%;
      height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: white;
      text-align: center;
    }

    /*#start { background: #007bff; }
    #section2 { background: #28a745; }
    #section3 { background: #ffc107; color: black; overflow: hidden; }
    #section4 { background: #dc3545; }*/

    /* --- horizontale Slides --- */
    .horizontal-container {
      display: flex;
      align-self: start;
      width: 300vw; /* 3 Slides = 3x 100vw */
      height: 100%;
      transition: transform 0.8s ease-in-out;
    }

    .slide {
      width: 100vw;
      height: 100vh;
      flex-shrink: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      color: white;
    }

    .slide:nth-child(1) { background: #6c757d; }
    .slide:nth-child(2) { background: #17a2b8; }
    .slide:nth-child(3) { background: #6610f2; }

    .btn-next {
      margin-top: 20px;
    }
  </style>
</head>
<body>

   <!-- Navigation -->
  <nav class="navbar navbar-dark bg-dark fixed-top">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">One-Pager Mix</a>
    </div>
  </nav>

  <!-- Bereich 1 -->
  <section id="start">
    <div class="container">
      <div class="row">
        <div class="col-10 col-sm-8 col-md-6">
          <form>
            <h1>CRONIX</h1>
            <div class="input-group mb-3">
              <input type="text" class="form-control" placeholder="Name" aria-label="Name" aria-describedby="input-name" id="input-name">
              <label class="input-group-text" for="input-name">Name</label>
            </div>
            <div class="input-group mb-3">
              <input type="text" class="form-control" placeholder="Spiel-PIN" aria-label="Spiel-PIN" aria-describedby="button-joinwithpin">
              <button class="btn btn-outline-light" type="button" id="button-joinwithpin">Spiel mit PIN beitreten</button>
            </div>
            <div class="input-group mb-3">
              <select class="form-select" id="inputGroupSelectGame" aria-label="Spiel ausw√§hlen und beitreten">
                <option selected>Spiel ausw√§hlen</option>
                <option value="1">Schlager</option>
                <option value="2">Pop</option>
                <option value="3">Musical</option>
              </select>
              <button class="btn btn-outline-light" type="button">Spiel beitreten</button>
            </div>        
            <div class="input-group mb-3">
              <input type="text" class="form-control" placeholder="Spiel-Titel" aria-label="Spiel-Titel" aria-describedby="button-creategame">
              <button class="btn btn-outline-light" type="button" id="button-creategame">Neues Spiel erstellen</button>
            </div>
            <div class="input-group">
              <button class="btn btn-outline-light" type="button" id="spotifyPlay">Play</button>
              <label class="input-group-text" for="spotify-buttons">Spotify</label>
              <button class="btn btn-outline-light" type="button" id="spotifyPause">Play</button>
            </div>    
            <div id="embed-iframe"></div>
        
            <!--<button class="btn btn-light btn-next" data-target="#section2">Weiter</button>-->
          </form>
        </div>
      </div>
    </div>
  </section>

  <!-- Bereich 2 -->
  <section id="section2">
    <h1>SESSIONS</h1>
    <button type="button" class="btn btn-primary scroll" scrollTo="start">Primary</button>
    
    <div class="d-flex gap-3 mt-3">
      <button class="btn btn-outline-light btn-next" data-target="#start">Zur√ºck</button>
      <button class="btn btn-light btn-next" data-target="#section3">Weiter</button>
    </div>
  </section>

  <!-- Bereich 3 ‚Äì horizontale Slides -->
  <section class="overflow-hidden" id="section3">
    <!--<h1>Horizontale Sektion mit 3 Slides</h1>-->

    <div class="horizontal-container" id="slides">
      <div class="slide">
        Slide 1
        <div class="d-flex justify-content-center gap-3 mt-3">
          <button class="btn btn-dark prevSlide">‚óÄÔ∏è</button>
          <button class="btn btn-dark nextSlide">‚ñ∂Ô∏è</button>
          <button class="btn btn-outline-dark btn-next mt-4" data-target="#section4">Zum n√§chsten Bereich</button>
        </div>
      </div>
      <div class="slide">
        Slide 2
        <div class="d-flex justify-content-center gap-3 mt-3">
          <button class="btn btn-dark prevSlide">‚óÄÔ∏è</button>
          <button class="btn btn-dark nextSlide">‚ñ∂Ô∏è</button>
          <button class="btn btn-outline-dark btn-next mt-4" data-target="#section4">Zum n√§chsten Bereich</button>
        </div>
      </div>
      <div class="slide">
        Slide 3
        <div class="d-flex justify-content-center gap-3 mt-3">
          <button class="btn btn-dark prevSlide">‚óÄÔ∏è</button>
          <button class="btn btn-dark nextSlide">‚ñ∂Ô∏è</button>
          <button class="btn btn-outline-dark btn-next mt-4" data-target="#section4">Zum n√§chsten Bereich</button>
        </div>
      </div>
    </div>

    <!--<div class="d-flex justify-content-center gap-3 mt-3">
      <button class="btn btn-dark" id="prevSlide">‚óÄÔ∏è</button>
      <button class="btn btn-dark" id="nextSlide">‚ñ∂Ô∏è</button>
    </div>

    <button class="btn btn-outline-dark btn-next mt-4" data-target="#section4">Zum n√§chsten Bereich</button>-->
  </section>

  <!-- Bereich 4 -->
  <section id="section4">
    <h1>Vertikaler Bereich 4 üéâ</h1>
    <button class="btn btn-light btn-next" data-target="#start">Zur√ºck zum Anfang</button>
  </section>
  
  <script src="/socket.io/socket.io.js"></script>

  <script>
    $(document).ready(function() {
      // Vertikales Scrollen
      $(".btn-next").click(function(e) {
        e.preventDefault();
        e.stopImmediatePropagation();
        const target = $($(this).data("target"));
        $('html').stop(true);
        requestAnimationFrame(() => {
          $("html").animate({
            scrollTop: target.offset().top
          }, 800);
        });
      });

      // Horizontaler Slider
      let currentSlide = 0;
      const totalSlides = 3;

      $(".nextSlide").click(function() {
        if (currentSlide < totalSlides - 1) {
          currentSlide++;
          $("#slides").css("transform", `translateX(-${currentSlide * 100}vw)`);
        }
      });

      $(".prevSlide").click(function() {
        if (currentSlide > 0) {
          currentSlide--;
          $("#slides").css("transform", `translateX(-${currentSlide * 100}vw)`);
        }
      });
    });


    
    /*$(".btn.scroll").click(function() {
      var scrollToEl = $(this).attr("scrollTo");
      $("html, body").animate({
        scrollTop: $("#"+scrollToEl).offset().top
      }, 500);
    });*/

    const socket = io();

    socket.emit("hello", "world", (response) => {
      //console.log(response);
      $("#input-name").val("user-" + response);
    });
    
    $("#btnNewGame").click(function(e) {
      e.preventDefault();
      socket.emit("getGames", (response) => {
        console.log(response);
      });
    });

    window.onSpotifyIframeApiReady = (IFrameAPI) => {
      const element = document.getElementById('embed-iframe');
      const options = {
          width: "1",
          height: "1",
          uri: 'https://open.spotify.com/intl-de/track/5GMlEA5ivPzZmCJ9VTCZtI?si=950824c500424d86'
        };
      const callback = (EmbedController) => {
        $("#spotifyPlay").click(function(e) {
          e.preventDefault();
          EmbedController.play();
        });

        $("#spotifyPause").click(function(e) {
          e.preventDefault();
          EmbedController.pause();
        });        
      };
      IFrameAPI.createController(element, options, callback);
    };
    
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>
  <script src="https://open.spotify.com/embed/iframe-api/v1" async></script>
</body>
</html>
